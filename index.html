<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Sky VS - Vs with players</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    * { margin:0; padding:0; box-sizing:border-box; font-family: Arial, sans-serif; }
    body { background:#fff; overflow:hidden; }

    /* Loading Screen */
    #loading {
      position:fixed; top:0; left:0; width:100%; height:100%;
      background:#000; color:#0ff; display:flex; flex-direction:column;
      justify-content:center; align-items:center; z-index:9999;
    }
    #loading h1 { font-size:50px; animation: glow 1.5s infinite alternate; }
    @keyframes glow { from { text-shadow:0 0 10px #0ff; } to { text-shadow:0 0 30px #0ff; } }
    #progress {
      margin-top:20px; width:60%; height:8px; background:#333; border-radius:4px; overflow:hidden;
    }
    #bar { width:0; height:100%; background:#0ff; transition:width 0.3s; }

    /* Popup Warning */
    .popup {
      position:fixed; top:0; left:0; width:100%; height:100%;
      background:rgba(0,0,0,0.9); color:#fff; display:flex;
      justify-content:center; align-items:center; flex-direction:column; text-align:center;
      padding:20px; z-index:9998;
    }
    .popup button { margin-top:20px; padding:10px 20px; background:#0ff; border:none; border-radius:5px; cursor:pointer; }

    /* Login */
    #login {
      display:flex; flex-direction:column; justify-content:center; align-items:center;
      height:100vh; background:#111; color:#fff; display:none;
    }
    #login input {
      margin:10px; padding:10px; border:none; border-radius:5px; width:200px;
    }
    #login button { padding:10px 20px; border:none; border-radius:5px; background:#0ff; cursor:pointer; }

    /* Dashboard */
    #dashboard {
      display:none; position:relative; height:100vh; overflow:hidden; background:#fff;
    }
    #players { display:flex; flex-wrap:wrap; padding:20px; }
    .player {
      background:#f5f5f5; border-radius:10px; padding:20px; margin:10px; flex:1 1 200px;
      text-align:center; box-shadow:0 2px 5px rgba(0,0,0,0.2); cursor:pointer;
      transition:transform 0.2s;
    }
    .player:hover { transform:scale(1.05); }

    /* Profile button */
    #profileBtn {
      position:absolute; top:10px; right:10px; background:#0ff; padding:10px 15px; border:none;
      border-radius:5px; cursor:pointer;
    }

    /* Animated bubbles */
    .bubble {
      position:absolute; bottom:-100px; background:rgba(0,255,255,0.3); border-radius:50%;
      animation: rise 15s infinite ease-in;
    }
    @keyframes rise {
      0% { transform:translateY(0) scale(1); opacity:1; }
      100% { transform:translateY(-120vh) scale(0.5); opacity:0; }
    }

    /* Card Popup */
    #card {
      position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.7);
      display:none; justify-content:center; align-items:center; z-index:999;
    }
    #cardContent {
      background:#fff; padding:20px; border-radius:10px; text-align:center;
      max-width:300px;
    }
    #cardContent input { margin:10px 0; padding:8px; width:90%; border:1px solid #ccc; border-radius:5px; }
    #cardContent button { margin-top:10px; padding:10px; background:#0ff; border:none; border-radius:5px; cursor:pointer; }

    /* Profile form */
    #profileForm {
      display:none; position:fixed; top:0; left:0; width:100%; height:100%;
      background:rgba(0,0,0,0.7); justify-content:center; align-items:center; z-index:1000;
    }
    #profileForm form {
      background:#fff; padding:20px; border-radius:10px; display:flex; flex-direction:column;
    }
    #profileForm input { margin:5px 0; padding:10px; border:1px solid #ccc; border-radius:5px; }
    #profileForm button { margin-top:10px; padding:10px; background:#0ff; border:none; border-radius:5px; cursor:pointer; }
  </style>
</head>
<body>
  <!-- Loading -->
  <div id="loading">
    <h1>Sky VS</h1>
    <div id="progress"><div id="bar"></div></div>
  </div>

  <!-- Popup Warning -->
  <div id="warning" class="popup" style="display:none;">
    <h2>⚠️ HI player!</h2>
    <p>Here you can VS with pro players on FC and play together. This is not official, just fun for players!</p>
    <p>Disclaimer: This site is fan-made only. Not official.</p>
    <button onclick="showSecondWarning()">Continue</button>
    <p style="margin-top:10px; font-size:12px;">If you press continue, that means you read the following warning.</p>
  </div>

  <div id="secondWarning" class="popup" style="display:none;">
    <p>You will receive an email message if you VS with any player. We all give a message to you for the player is Ready.</p>
    <button onclick="showLogin()">OK</button>
  </div>

  <!-- Login -->
  <div id="login">
    <h2>Login</h2>
    <input type="text" id="username" placeholder="Name">
    <input type="password" id="password" placeholder="Password">
    <button onclick="login()">Sign In</button>
  </div>

  <!-- Dashboard -->
  <div id="dashboard">
    <button id="profileBtn" onclick="openProfileForm()">Profile</button>
    <div id="players"></div>
  </div>

  <!-- Player Card -->
  <div id="card">
    <div id="cardContent"></div>
  </div>

  <!-- Profile Form -->
  <div id="profileForm">
    <form onsubmit="uploadPlayer(event)">
      <h3>Add My VS</h3>
      <input type="text" id="pName" placeholder="Name" required>
      <input type="text" id="pFCID" placeholder="FC_ID" required>
      <input type="email" id="pEmail" placeholder="Email" required>
      <button type="submit">Upload</button>
      <button type="button" onclick="closeProfileForm()">Close</button>
    </form>
  </div>

  <script>
    const API = "https://sheetdb.io/api/v1/i6dgu53mhxpvx";

    // Loading animation
    let load = 0;
    let interval = setInterval(() => {
      load += 10;
      document.getElementById('bar').style.width = load + "%";
      if (load >= 100) {
        clearInterval(interval);
        document.getElementById('loading').style.display = "none";
        document.getElementById('warning').style.display = "flex";
      }
    }, 400);

    function showSecondWarning() {
      document.getElementById('warning').style.display = "none";
      document.getElementById('secondWarning').style.display = "flex";
    }

    function showLogin() {
      document.getElementById('secondWarning').style.display = "none";
      if (localStorage.getItem("loggedIn")) {
        loadPlayers();
      } else {
        document.getElementById('login').style.display = "flex";
      }
    }

    function login() {
      let user = document.getElementById('username').value;
      let pass = document.getElementById('password').value;
      if (user && pass) {
        localStorage.setItem("loggedIn", "true");
        document.getElementById('login').style.display = "none";
        loadPlayers();
      }
    }

    function loadPlayers() {
      document.getElementById('dashboard').style.display = "block";
      document.body.style.overflow = "auto";
      fetch(API).then(res => res.json()).then(data => {
        let playersDiv = document.getElementById('players');
        playersDiv.innerHTML = "";
        data.forEach(player => {
          let div = document.createElement("div");
          div.className = "player";
          div.innerHTML = `<h3>${player.Name}</h3><p>ID: ${player.FC_ID}</p>`;
          div.onclick = () => openCard(player);
          playersDiv.appendChild(div);
        });
      });

      // bubbles
      for (let i=0;i<20;i++){
        let bubble=document.createElement("div");
        bubble.className="bubble";
        let size=Math.random()*40+20;
        bubble.style.width=size+"px";
        bubble.style.height=size+"px";
        bubble.style.left=Math.random()*100+"%";
        bubble.style.animationDuration=(Math.random()*10+5)+"s";
        document.getElementById('dashboard').appendChild(bubble);
      }
    }

    function openCard(player) {
      document.getElementById('card').style.display = "flex";
      document.getElementById('cardContent').innerHTML = `
        <h3>${player.Name}</h3>
        <p>FC_ID: ${player.FC_ID}</p>
        <p>Email: ${player.Email || "Not Provided"}</p>
        <input type="email" id="challengeEmail" placeholder="Enter your Email (optional)">
        <button onclick="challengePlayer('${player.Name}','${player.FC_ID}')">Challenge Player!</button>
        <button onclick="closeCard()">Close</button>
      `;
    }
    function closeCard() { document.getElementById('card').style.display="none"; }

    function challengePlayer(name, fcid) {
      let myid = prompt("Enter your FC_ID to VS this player:");
      let myEmail = document.getElementById("challengeEmail").value;
      if(myid){
        alert(`You challenged ${name}. Match will start soon!`);
        // Save VS + email (if provided)
        fetch(API, {
          method:"POST",
          headers:{"Content-Type":"application/json"},
          body:JSON.stringify({ data:[{ Name:"VS", FC_ID: myid+" vs "+fcid, Email: myEmail||"" }] })
        });
      }
    }

    function openProfileForm(){ document.getElementById('profileForm').style.display="flex"; }
    function closeProfileForm(){ document.getElementById('profileForm').style.display="none"; }

    function uploadPlayer(e){
      e.preventDefault();
      let name=document.getElementById('pName').value;
      let id=document.getElementById('pFCID').value;
      let email=document.getElementById('pEmail').value;
      fetch(API,{
        method:"POST",
        headers:{"Content-Type":"application/json"},
        body:JSON.stringify({ data:[{ Name:name, FC_ID:id, Email:email }] })
      }).then(r=>r.json()).then(res=>{
        alert("Uploaded Successfully!");
        closeProfileForm();
        loadPlayers();
      }).catch(err=>alert("Upload Failed: "+err));
    }
  </script>
</body>
</html>




